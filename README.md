# brmn music

'컨텐츠 업계의 폐쇄적인 문화를 개선하자'는 목표의 프로젝트 입니다

## 수상 경력
- 2021 중소기업벤처부 주관 예비창업패키지 수행 및 최우수기업 선정
- 2021 한국사회적기업진흥원 선정 소셜벤처기업
- 2021 건국대학 LINC+사업단 최우수 창업기업 선정
- 2021 서울캠퍼스타운 선정 최우수 창업기업 선정
- 2021 KU LINC+ 창업경진대회 우수상
- 2021 건국캠퍼스타운 창업경진대회 최우수상

### 직면했던 문제 사항
1) ExpressJS - AWS 서버 배포시 DB 테이블명이 로컬과 다르게 나타나는 문제

> Sequelize를 이용하여 DB를 연동해 보았습니다. 로컬에서는 문제없이 정상 작동하였으나 AWS(리눅스 환경)에 배포시 DB 테이블명이 로컬과 다르게 설정되어 API가 정상 작동하지 않던 문제가 생겼습니다. 윈도우와 리눅스의 환경에서 Sequelize가 자동적으로 테이블명을 생성하며 무언가 문제가 생겼을 것이라 생각했습니다. Sequelize의 define을 사용하여 명시적으로 테이블명을 설정해 주었고 이후 문제없이 정상 작동하였습니다.

2) NextJS - Image Tag Error: Invalid src prop

> Lazy Loading을 통한 이미지 최적화를 지원하기 위해 next/image의 Image태그를 사용했습니다. AWS S3버킷을 이용하여 이미지를 저장하고 로드 하였는데 외부 링크의 이미지를 불러오기에 에러가 발생하였습니다. Next.config에 명시적으로 도메인을 입력해줌으로써 문제를 해결했습니다.

3) NextJS - router에서 쿼리가 제대로 인식되지 않는 문제

> useRouter를 통해 얻은 router 객체가 렌더링전에 undefined상태였기에 정상 작동하지 않았고 useEffect를 사용하여 router의 isReady를 판별하고 참일경우 값을 받아오는 방법으로 문제를 해결하였습니다만 지금 다시 문제를 해결한다면 getServerSideProps 함수를 미리 정의하여 쿼리를 받아오는 방식으로 해결할 것 같습니다.

4) ExpressJS, NextJS CORS문제

> 로컬에서는 백엔드와 프론트엔드의 포트가 달라서 배포시에는 향후 확장성을 위해 프론트엔드와 백엔드 서버를 분리 배포하여 CORS 문제가 발생하였습니다. 백엔드 서버 측에서 origin에 명시적 url을 입력하고 쿠키-세션 방식의 인증방식을 사용했기 때문에 프론트엔드에서 axios.defaults.withCredentials = true로 설정하여 요청이 자격 증명(쿠키, 인증 헤더 등)을 포함하여 보내지도록 지정했습니다.
